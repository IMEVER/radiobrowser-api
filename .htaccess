Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "GET,POST"

#AddHandler php-script .pls
<Files "*.pls">
	#SetHandler php-script
	SetHandler application/x-httpd-php
</Files>

RewriteEngine on
# http://site/webservice/<type>/countries
RewriteRule ^webservice/(.*)/countries/(.*)$ /?term=$2&format=$1&action=countries
RewriteRule ^webservice/(.*)/countries$ /?format=$1&action=countries

# http://site/webservice/<type>/countries
RewriteRule ^webservice/(.*)/states/(.*)/(.*)$ /?term=$3&country=$2&format=$1&action=states
RewriteRule ^webservice/(.*)/states/(.*)$ /?term=$2&format=$1&action=states
RewriteRule ^webservice/(.*)/states$ /?format=$1&action=states

# http://site/webservice/<type>/languages
RewriteRule ^webservice/(.*)/languages/(.*)$ /?term=$2&format=$1&action=languages
RewriteRule ^webservice/(.*)/languages$ /?format=$1&action=languages

# http://site/webservice/<type>/tags
RewriteRule ^webservice/(.*)/tags/(.*)$ /?format=$1&action=tags&term=$2
RewriteRule ^webservice/(.*)/tags$ /?format=$1&action=tags

RewriteRule ^webservice$ /docs.html
RewriteRule ^webservice/$ /docs.html

RewriteRule ^webservice/add$ /?action=add
RewriteRule ^webservice/edit$ /?action=edit

# http://site/webservice/<type>/stations
RewriteRule ^webservice/(.*)/stations/topvote/(.*)$ /?format=$1&limit=$2&action=data_search_topvote
RewriteRule ^webservice/(.*)/stations/topvote$ /?format=$1&action=data_search_topvote
RewriteRule ^webservice/(.*)/stations/topclick/(.*)$ /?format=$1&limit=$2&action=data_search_topclick
RewriteRule ^webservice/(.*)/stations/topclick$ /?format=$1&action=data_search_topclick
RewriteRule ^webservice/(.*)/stations/lastclick/(.*)$ /?format=$1&limit=$2&action=data_search_lastclick
RewriteRule ^webservice/(.*)/stations/lastclick$ /?format=$1&action=data_search_lastclick
RewriteRule ^webservice/(.*)/stations/lastchange/(.*)$ /?format=$1&limit=$2&action=data_search_lastchange
RewriteRule ^webservice/(.*)/stations/lastchange$ /?format=$1&action=data_search_lastchange

RewriteRule ^webservice/(.*)/stations/byid/(.*)$ /?format=$1&term=$2&action=data_search_byid
RewriteRule ^webservice/(.*)/stations/bycountry/(.*)$ /?format=$1&term=$2&action=data_search_bycountry
RewriteRule ^webservice/(.*)/stations/bycountryexact/(.*)$ /?format=$1&term=$2&action=data_search_bycountry_exact
RewriteRule ^webservice/(.*)/stations/bylanguage/(.*)$ /?format=$1&term=$2&action=data_search_bylanguage
RewriteRule ^webservice/(.*)/stations/bylanguageexact/(.*)$ /?format=$1&term=$2&action=data_search_bylanguage_exact
RewriteRule ^webservice/(.*)/stations/bytag/(.*)$ /?format=$1&term=$2&action=data_search_bytag
RewriteRule ^webservice/(.*)/stations/bytagexact/(.*)$ /?format=$1&term=$2&action=data_search_bytag_exact
RewriteRule ^webservice/(.*)/stations/(.*)$ /?format=$1&term=$2&action=data_search
RewriteRule ^webservice/(.*)/stations$ /?format=$1&action=data_search

# compatibility with old rhytmbox-radio-browser
RewriteRule ^xml.php$ /?format=xml&action=data_search

# http://site/webservice/<type>/stats
RewriteRule ^webservice/(.*)/stats$ /?format=$1&action=stats

# http://site/webservice/<type>/url/<stationid>
RewriteRule ^webservice/(.*)/url/(.*)$ /get_station_url.php?format=$1&stationid=$2
# http://site/webservice/<type>/url/<stationid>
RewriteRule ^webservice/(.*)/vote/(.*)$ /?id=$2&action=vote&format=$1
